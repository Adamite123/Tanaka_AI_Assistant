<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptPing - Game Evaluasi Prompt</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e1b4b;
            --text: #374151;
            --light: #f3f4f6;
            --white: #ffffff;
            --border: #e5e7eb;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 1.5rem 0;
            color: white;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.3rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 0.7rem 1.2rem;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.3);
        }

        .nav-tab.active {
            background: white;
            color: var(--primary);
        }

        /* Main Card */
        .main-card {
            background: white;
            border-radius: 15px;
            padding: 1rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        /* Desktop Styles */
        @media (min-width: 768px) {
            .container {
                padding: 2rem;
            }

            .header {
                padding: 2rem 0;
            }

            .header h1 {
                font-size: 3rem;
            }

            .header p {
                font-size: 1.2rem;
            }

            .nav-tabs {
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .nav-tab {
                padding: 1rem 2rem;
                font-size: 1rem;
            }

            .nav-tab:hover {
                transform: translateY(-2px);
            }

            .main-card {
                border-radius: 20px;
                padding: 2rem;
            }
        }

        /* Page Sections */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* Challenge Selection */
        .challenge-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .challenge-card {
            background: var(--light);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .challenge-card:hover {
            border-color: var(--primary);
        }

        .challenge-card.selected {
            border-color: var(--success);
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        }

        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .challenge-number {
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .difficulty-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 20px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .difficulty-easy { background: #d1fae5; color: #065f46; }
        .difficulty-medium { background: #fef3c7; color: #92400e; }
        .difficulty-hard { background: #fee2e2; color: #991b1b; }

        .challenge-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.4rem;
        }

        .challenge-task {
            color: var(--text);
            font-size: 0.85rem;
            line-height: 1.4;
        }

        @media (min-width: 768px) {
            .challenge-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 1.5rem;
            }

            .challenge-card {
                border-radius: 15px;
                padding: 1.5rem;
                border-width: 3px;
            }

            .challenge-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(99, 102, 241, 0.2);
            }

            .challenge-number {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .difficulty-badge {
                padding: 0.3rem 0.8rem;
                font-size: 0.75rem;
            }

            .challenge-title {
                font-size: 1.2rem;
                margin-bottom: 0.5rem;
            }

            .challenge-task {
                font-size: 0.95rem;
                line-height: 1.5;
            }
        }

        /* Game Section */
        .game-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .current-challenge {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .current-challenge h3 {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }

        .challenge-info {
            background: rgba(255,255,255,0.15);
            padding: 0.75rem;
            border-radius: 8px;
            margin-top: 0.75rem;
        }

        .challenge-info p {
            margin-bottom: 0.4rem;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .challenge-info strong {
            display: block;
            margin-bottom: 0.2rem;
        }

        /* Prompt Input */
        .prompt-section {
            margin-bottom: 1rem;
        }

        .prompt-section h4 {
            color: var(--dark);
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        .prompt-textarea {
            width: 100%;
            min-height: 120px;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.9rem;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .prompt-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .char-count {
            text-align: right;
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.3rem;
        }

        /* Player Name Input */
        .player-input {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .player-input input {
            flex: 1;
            padding: 0.7rem 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .player-input input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.25rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--light);
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        .btn-block {
            width: 100%;
        }

        @media (min-width: 768px) {
            .current-challenge {
                padding: 2rem;
                border-radius: 15px;
                margin-bottom: 2rem;
            }

            .current-challenge h3 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }

            .challenge-info {
                padding: 1rem;
                border-radius: 10px;
                margin-top: 1rem;
            }

            .challenge-info p {
                margin-bottom: 0.5rem;
                font-size: 1rem;
            }

            .challenge-info strong {
                display: inline-block;
                width: 160px;
                margin-bottom: 0;
            }

            .prompt-section {
                margin-bottom: 2rem;
            }

            .prompt-section h4 {
                margin-bottom: 1rem;
                font-size: 1.2rem;
            }

            .prompt-textarea {
                min-height: 150px;
                padding: 1rem;
                border-radius: 10px;
                font-size: 1rem;
            }

            .char-count {
                font-size: 0.85rem;
                margin-top: 0.5rem;
            }

            .player-input {
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .player-input input {
                padding: 0.8rem 1rem;
                border-radius: 10px;
                font-size: 1rem;
            }

            .btn {
                padding: 1rem 2rem;
                border-radius: 10px;
                font-size: 1rem;
                gap: 0.5rem;
            }

            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 20px rgba(99, 102, 241, 0.4);
            }
        }

        /* Results Section */
        .results-section {
            display: none;
            margin-top: 2rem;
        }

        .results-section.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ai-response {
            background: var(--light);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .ai-response h4 {
            color: var(--dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ai-response-content {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            white-space: pre-wrap;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }

        /* Score Cards */
        .score-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .score-card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .score-card.clarity { border-top: 3px solid #3b82f6; }
        .score-card.instruction { border-top: 3px solid #10b981; }
        .score-card.hallucination { border-top: 3px solid #f59e0b; }

        .score-label {
            font-size: 0.75rem;
            color: #6b7280;
            margin-bottom: 0.3rem;
        }

        .score-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .score-card.clarity .score-value { color: #3b82f6; }
        .score-card.instruction .score-value { color: #10b981; }
        .score-card.hallucination .score-value { color: #f59e0b; }

        .score-feedback {
            font-size: 0.75rem;
            color: var(--text);
            line-height: 1.3;
        }

        /* Total Score */
        .total-score {
            background: linear-gradient(135deg, var(--dark) 0%, #312e81 100%);
            color: white;
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .total-score h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }

        .total-score .big-score {
            font-size: 3rem;
            font-weight: 700;
        }

        .total-score .score-label {
            color: rgba(255,255,255,0.7);
            font-size: 0.8rem;
        }

        .overall-feedback {
            background: var(--light);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .overall-feedback h4 {
            color: var(--dark);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .overall-feedback p {
            line-height: 1.5;
            font-size: 0.85rem;
        }

        @media (min-width: 768px) {
            .score-cards {
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .score-card {
                border-radius: 15px;
                padding: 1.5rem;
                border-top-width: 4px;
            }

            .score-label {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }

            .score-value {
                font-size: 3rem;
                margin-bottom: 0.5rem;
            }

            .score-feedback {
                font-size: 0.85rem;
                line-height: 1.4;
            }

            .total-score {
                border-radius: 15px;
                padding: 2rem;
                margin-bottom: 2rem;
            }

            .total-score h3 {
                font-size: 1.2rem;
                margin-bottom: 1rem;
            }

            .total-score .big-score {
                font-size: 5rem;
            }

            .overall-feedback {
                border-radius: 15px;
                padding: 1.5rem;
                margin-bottom: 2rem;
            }

            .overall-feedback h4 {
                margin-bottom: 1rem;
                font-size: 1rem;
            }

            .overall-feedback p {
                line-height: 1.6;
                font-size: 1rem;
            }
        }

        /* Leaderboard */
        .leaderboard-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 500px;
        }

        .leaderboard-table th,
        .leaderboard-table td {
            padding: 0.6rem 0.5rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
            font-size: 0.8rem;
        }

        .leaderboard-table th {
            background: var(--light);
            font-weight: 600;
            color: var(--dark);
            white-space: nowrap;
        }

        .leaderboard-table tr:hover {
            background: #fafafa;
        }

        .rank-badge {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.75rem;
        }

        .rank-1 { background: #ffd700; color: #7c5800; }
        .rank-2 { background: #c0c0c0; color: #4a4a4a; }
        .rank-3 { background: #cd7f32; color: #5a3800; }
        .rank-default { background: var(--light); color: var(--text); }

        .score-badge {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.75rem;
        }

        /* Mobile Leaderboard Cards */
        .leaderboard-cards {
            display: none;
        }

        .leaderboard-card {
            background: var(--light);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--primary);
        }

        .leaderboard-card.rank-1-card { border-left-color: #ffd700; }
        .leaderboard-card.rank-2-card { border-left-color: #c0c0c0; }
        .leaderboard-card.rank-3-card { border-left-color: #cd7f32; }

        .leaderboard-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .leaderboard-card-name {
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .leaderboard-card-challenge {
            font-size: 0.8rem;
            color: var(--text);
            margin-bottom: 0.5rem;
        }

        .leaderboard-card-scores {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .leaderboard-card-score {
            background: white;
            padding: 0.25rem 0.5rem;
            border-radius: 5px;
            font-size: 0.7rem;
        }

        .leaderboard-card-score span {
            font-weight: 600;
        }

        @media (max-width: 600px) {
            .leaderboard-table-container {
                display: none;
            }

            .leaderboard-cards {
                display: block;
            }
        }

        @media (min-width: 768px) {
            .leaderboard-table th,
            .leaderboard-table td {
                padding: 1rem;
                font-size: 1rem;
            }

            .rank-badge {
                width: 30px;
                height: 30px;
                font-size: 0.9rem;
            }

            .score-badge {
                padding: 0.3rem 0.8rem;
                font-size: 0.9rem;
            }
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #6b7280;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* Tips Section */
        .tips-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .tips-section h4 {
            color: #92400e;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tips-list {
            list-style: none;
        }

        .tips-list li {
            padding: 0.5rem 0;
            color: #78350f;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .tips-list li::before {
            content: "âœ“";
            color: #059669;
            font-weight: bold;
        }

        /* AI Response */
        .ai-response {
            background: var(--light);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .ai-response h4 {
            color: var(--dark);
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }

        .ai-response-content {
            background: white;
            padding: 0.75rem;
            border-radius: 8px;
            white-space: pre-wrap;
            line-height: 1.5;
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.85rem;
        }

        @media (min-width: 768px) {
            .ai-response {
                border-radius: 15px;
                padding: 1.5rem;
                margin-bottom: 2rem;
            }

            .ai-response h4 {
                margin-bottom: 1rem;
                font-size: 1rem;
            }

            .ai-response-content {
                padding: 1rem;
                border-radius: 10px;
                max-height: 300px;
                font-size: 1rem;
                line-height: 1.6;
            }
        }

        /* Action buttons mobile */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        @media (min-width: 768px) {
            .action-buttons {
                flex-direction: row;
                justify-content: center;
                gap: 1rem;
            }
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 1.5rem;
            color: rgba(255,255,255,0.7);
            font-size: 0.85rem;
        }

        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: opacity 0.3s ease;
        }

        .footer a:hover {
            opacity: 0.8;
            text-decoration: underline;
        }

        .footer .credit {
            margin-top: 0.5rem;
            font-size: 0.75rem;
            opacity: 0.8;
        }

        @media (min-width: 768px) {
            .footer {
                padding: 2rem;
                font-size: 1rem;
            }

            .footer .credit {
                font-size: 0.85rem;
            }
        }

        /* Section title mobile */
        .section-title {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.2rem;
        }

        @media (min-width: 768px) {
            .section-title {
                margin-bottom: 1.5rem;
                font-size: 1.5rem;
            }
        }

        /* Tips section mobile */
        .tips-section {
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 10px;
        }

        .tips-section h4 {
            font-size: 0.95rem;
        }

        .tips-list li {
            font-size: 0.85rem;
            padding: 0.4rem 0;
        }

        @media (min-width: 768px) {
            .tips-section {
                padding: 1.5rem;
                margin-top: 2rem;
                border-radius: 15px;
            }

            .tips-section h4 {
                font-size: 1rem;
            }

            .tips-list li {
                font-size: 1rem;
                padding: 0.5rem 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>PromptPing</h1>
            <p>Game Evaluasi Kemampuan Membuat Prompt AI</p>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('play')">Main Game</button>
            <button class="nav-tab" onclick="showSection('leaderboard')">Leaderboard</button>
            <button class="nav-tab" onclick="showSection('guide')">Panduan</button>
        </nav>

        <!-- Main Card -->
        <div class="main-card">
            <!-- Play Section -->
            <section id="play-section" class="page-section active">
                <!-- Step 1: Choose Challenge -->
                <div id="step-choose" class="step-section">
                    <h2 class="section-title">Pilih Challenge</h2>
                    <div class="challenge-grid" id="challenge-grid">
                        <!-- Challenges loaded here -->
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="btn btn-primary" onclick="startChallenge()" id="start-btn" disabled>
                            Mulai Challenge
                        </button>
                    </div>
                </div>

                <!-- Step 2: Play Game -->
                <div id="step-play" class="step-section" style="display: none;">
                    <div class="game-section">
                        <!-- Current Challenge Info -->
                        <div class="current-challenge" id="current-challenge">
                            <!-- Challenge info loaded here -->
                        </div>

                        <!-- Player Name -->
                        <div class="player-input">
                            <input type="text" id="player-name" placeholder="Masukkan nama kamu..." maxlength="50">
                        </div>

                        <!-- Prompt Input -->
                        <div class="prompt-section">
                            <h4>Tulis Prompt Kamu:</h4>
                            <textarea
                                class="prompt-textarea"
                                id="user-prompt"
                                placeholder="Tulis prompt yang akan kamu kirim ke AI untuk menyelesaikan tugas di atas..."
                                maxlength="2000"
                            ></textarea>
                            <div class="char-count"><span id="char-count">0</span>/2000 karakter</div>
                        </div>

                        <!-- Submit Button -->
                        <button class="btn btn-primary btn-block" onclick="submitPrompt()" id="submit-btn">
                            Kirim & Evaluasi Prompt
                        </button>

                        <!-- Loading -->
                        <div class="loading" id="loading">
                            <div class="spinner"></div>
                            <p>Mengevaluasi prompt kamu...</p>
                        </div>

                        <!-- Results -->
                        <div class="results-section" id="results-section">
                            <!-- AI Response -->
                            <div class="ai-response">
                                <h4>Respons AI:</h4>
                                <div class="ai-response-content" id="ai-response-content"></div>
                            </div>

                            <!-- Score Cards -->
                            <div class="score-cards">
                                <div class="score-card clarity">
                                    <div class="score-label">Clarity</div>
                                    <div class="score-value" id="clarity-score">0</div>
                                    <div class="score-feedback" id="clarity-feedback">-</div>
                                </div>
                                <div class="score-card instruction">
                                    <div class="score-label">Instruction Following</div>
                                    <div class="score-value" id="instruction-score">0</div>
                                    <div class="score-feedback" id="instruction-feedback">-</div>
                                </div>
                                <div class="score-card hallucination">
                                    <div class="score-label">Anti-Hallucination</div>
                                    <div class="score-value" id="hallucination-score">0</div>
                                    <div class="score-feedback" id="hallucination-feedback">-</div>
                                </div>
                            </div>

                            <!-- Total Score -->
                            <div class="total-score">
                                <h3>Total Score</h3>
                                <div class="big-score" id="total-score">0</div>
                                <div class="score-label">dari 100</div>
                            </div>

                            <!-- Overall Feedback -->
                            <div class="overall-feedback">
                                <h4>Feedback & Tips:</h4>
                                <p id="overall-feedback">-</p>
                            </div>

                            <!-- Action Buttons -->
                            <div class="action-buttons">
                                <button class="btn btn-secondary" onclick="tryAgain()">
                                    Coba Lagi
                                </button>
                                <button class="btn btn-primary" onclick="backToChoose()">
                                    Challenge Lain
                                </button>
                            </div>
                        </div>

                        <!-- Back Button -->
                        <div style="text-align: center; margin-top: 1rem;">
                            <button class="btn btn-secondary" onclick="backToChoose()">
                                Kembali
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Leaderboard Section -->
            <section id="leaderboard-section" class="page-section">
                <h2 class="section-title">Leaderboard</h2>

                <!-- Mobile Cards View -->
                <div class="leaderboard-cards" id="leaderboard-cards">
                    <!-- Cards loaded here -->
                </div>

                <!-- Desktop Table View -->
                <div class="leaderboard-table-container">
                    <div class="leaderboard-container">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Nama</th>
                                    <th>Challenge</th>
                                    <th>C</th>
                                    <th>I</th>
                                    <th>H</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                                <!-- Leaderboard data loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Guide Section -->
            <section id="guide-section" class="page-section">
                <h2 class="section-title">Panduan Bermain</h2>

                <div class="tips-section" style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); margin-bottom: 1.5rem;">
                    <h4 style="color: #1e40af;">Cara Bermain</h4>
                    <ol style="padding-left: 1.5rem; color: #1e3a8a;">
                        <li style="padding: 0.5rem 0;">Pilih challenge yang ingin kamu kerjakan</li>
                        <li style="padding: 0.5rem 0;">Baca tugas dan konteks dengan seksama</li>
                        <li style="padding: 0.5rem 0;">Tulis prompt terbaik kamu untuk menyelesaikan tugas</li>
                        <li style="padding: 0.5rem 0;">Kirim dan lihat evaluasi dari 3 kriteria</li>
                        <li style="padding: 0.5rem 0;">Perbaiki prompt dan coba lagi untuk skor lebih tinggi!</li>
                    </ol>
                </div>

                <div class="tips-section" style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); margin-bottom: 1.5rem;">
                    <h4 style="color: #065f46;">Kriteria Penilaian</h4>
                    <ul class="tips-list">
                        <li><strong>Clarity (Kejelasan):</strong> Seberapa jelas dan tidak ambigu prompt kamu</li>
                        <li><strong>Instruction Following:</strong> Seberapa baik prompt memenuhi persyaratan tugas</li>
                        <li><strong>Anti-Hallucination:</strong> Seberapa baik prompt mencegah AI mengarang informasi</li>
                    </ul>
                </div>

                <div class="tips-section">
                    <h4 style="color: #92400e;">Tips Membuat Prompt yang Baik</h4>
                    <ul class="tips-list">
                        <li>Jelaskan konteks dan latar belakang dengan jelas</li>
                        <li>Sebutkan format output yang diinginkan</li>
                        <li>Berikan batasan atau constraint jika perlu</li>
                        <li>Minta AI untuk mengakui jika tidak tahu</li>
                        <li>Gunakan bahasa yang spesifik, hindari kata-kata ambigu</li>
                        <li>Break down tugas kompleks menjadi langkah-langkah</li>
                        <li>Berikan contoh jika memungkinkan</li>
                    </ul>
                </div>
            </section>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>PromptPing - Belajar Membuat Prompt AI yang Efektif</p>
            <p class="credit">Created by <a href="https://www.linkedin.com/in/adamzzz/" target="_blank" rel="noopener noreferrer">Adam Muhammad</a></p>
        </footer>
    </div>

    <script>
        // State
        let challenges = [];
        let selectedChallenge = null;
        let leaderboardInterval = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadChallenges();
            loadLeaderboard();

            // Character count
            document.getElementById('user-prompt').addEventListener('input', function() {
                document.getElementById('char-count').textContent = this.value.length;
            });
        });

        // Start/Stop Leaderboard Polling
        function startLeaderboardPolling() {
            // Clear existing interval
            stopLeaderboardPolling();
            // Poll every 5 seconds
            leaderboardInterval = setInterval(loadLeaderboard, 5000);
        }

        function stopLeaderboardPolling() {
            if (leaderboardInterval) {
                clearInterval(leaderboardInterval);
                leaderboardInterval = null;
            }
        }

        // Show Section
        function showSection(section) {
            // Stop polling when switching tabs
            stopLeaderboardPolling();

            // Update nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            // Update sections
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            document.getElementById(section + '-section').classList.add('active');

            // Refresh leaderboard and start polling when shown
            if (section === 'leaderboard') {
                loadLeaderboard();
                startLeaderboardPolling();
            }
        }

        // Load Challenges
        async function loadChallenges() {
            try {
                const response = await fetch('/api/challenges');
                const data = await response.json();

                if (data.success) {
                    challenges = data.data;
                    renderChallenges();
                }
            } catch (error) {
                console.error('Error loading challenges:', error);
            }
        }

        // Render Challenges
        function renderChallenges() {
            const grid = document.getElementById('challenge-grid');
            grid.innerHTML = challenges.map(challenge => `
                <div class="challenge-card" onclick="selectChallenge(${challenge.id})" id="challenge-${challenge.id}">
                    <div class="challenge-header">
                        <div class="challenge-number">${challenge.id}</div>
                        <span class="difficulty-badge difficulty-${challenge.difficulty}">${challenge.difficulty}</span>
                    </div>
                    <div class="challenge-title">${challenge.title}</div>
                    <div class="challenge-task">${challenge.task}</div>
                </div>
            `).join('');
        }

        // Select Challenge
        function selectChallenge(id) {
            // Clear previous selection
            document.querySelectorAll('.challenge-card').forEach(card => card.classList.remove('selected'));

            // Set new selection
            selectedChallenge = challenges.find(c => c.id === id);
            document.getElementById('challenge-' + id).classList.add('selected');
            document.getElementById('start-btn').disabled = false;
        }

        // Start Challenge
        function startChallenge() {
            if (!selectedChallenge) return;

            // Show play step
            document.getElementById('step-choose').style.display = 'none';
            document.getElementById('step-play').style.display = 'block';

            // Render challenge info
            document.getElementById('current-challenge').innerHTML = `
                <h3>Challenge #${selectedChallenge.id}: ${selectedChallenge.title}</h3>
                <p style="margin-bottom: 1rem; font-size: 1.1rem;">${selectedChallenge.task}</p>
                <div class="challenge-info">
                    <p><strong>Konteks:</strong> ${selectedChallenge.context}</p>
                    <p><strong>Output yang diharapkan:</strong> ${selectedChallenge.expected_output}</p>
                </div>
            `;

            // Reset form
            document.getElementById('user-prompt').value = '';
            document.getElementById('char-count').textContent = '0';
            document.getElementById('results-section').classList.remove('show');
        }

        // Back to Choose
        function backToChoose() {
            document.getElementById('step-choose').style.display = 'block';
            document.getElementById('step-play').style.display = 'none';
            document.getElementById('results-section').classList.remove('show');
        }

        // Try Again
        function tryAgain() {
            document.getElementById('user-prompt').value = '';
            document.getElementById('char-count').textContent = '0';
            document.getElementById('results-section').classList.remove('show');
            document.getElementById('user-prompt').focus();
        }

        // Submit Prompt
        async function submitPrompt() {
            const prompt = document.getElementById('user-prompt').value.trim();
            const playerName = document.getElementById('player-name').value.trim() || 'Anonymous';

            if (!prompt) {
                alert('Silakan tulis prompt terlebih dahulu!');
                return;
            }

            // Show loading
            document.getElementById('submit-btn').disabled = true;
            document.getElementById('loading').classList.add('show');
            document.getElementById('results-section').classList.remove('show');

            try {
                const response = await fetch('/api/submit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: prompt,
                        challenge_id: selectedChallenge.id,
                        player_name: playerName
                    })
                });

                const data = await response.json();

                if (data.success) {
                    displayResults(data.data);
                } else {
                    alert('Error: ' + (data.error || 'Terjadi kesalahan'));
                }
            } catch (error) {
                console.error('Error submitting:', error);
                alert('Terjadi kesalahan saat mengirim prompt');
            } finally {
                document.getElementById('submit-btn').disabled = false;
                document.getElementById('loading').classList.remove('show');
            }
        }

        // Display Results
        function displayResults(data) {
            const evaluation = data.evaluation;

            // AI Response
            document.getElementById('ai-response-content').textContent = data.ai_response;

            // Scores
            document.getElementById('clarity-score').textContent = evaluation.clarity.score;
            document.getElementById('clarity-feedback').textContent = evaluation.clarity.feedback;

            document.getElementById('instruction-score').textContent = evaluation.instruction_following.score;
            document.getElementById('instruction-feedback').textContent = evaluation.instruction_following.feedback;

            document.getElementById('hallucination-score').textContent = evaluation.hallucination.score;
            document.getElementById('hallucination-feedback').textContent = evaluation.hallucination.feedback;

            // Total Score
            document.getElementById('total-score').textContent = Math.round(evaluation.total_score);

            // Overall Feedback
            document.getElementById('overall-feedback').textContent = evaluation.overall_feedback;

            // Show results
            document.getElementById('results-section').classList.add('show');

            // Scroll to results
            document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Load Leaderboard
        async function loadLeaderboard() {
            try {
                const response = await fetch('/api/leaderboard');
                const data = await response.json();

                if (data.success) {
                    renderLeaderboard(data.data);
                }
            } catch (error) {
                console.error('Error loading leaderboard:', error);
            }
        }

        // Render Leaderboard
        function renderLeaderboard(players) {
            const tbody = document.getElementById('leaderboard-body');
            const cardsContainer = document.getElementById('leaderboard-cards');

            if (players.length === 0) {
                const emptyMsg = `
                    <div style="text-align: center; padding: 2rem; color: #6b7280;">
                        Belum ada data. Jadilah yang pertama!
                    </div>
                `;
                tbody.innerHTML = `<tr><td colspan="7">${emptyMsg}</td></tr>`;
                cardsContainer.innerHTML = emptyMsg;
                return;
            }

            // Render table for desktop
            tbody.innerHTML = players.map((player, index) => {
                const rank = index + 1;
                let rankClass = 'rank-default';
                if (rank === 1) rankClass = 'rank-1';
                else if (rank === 2) rankClass = 'rank-2';
                else if (rank === 3) rankClass = 'rank-3';

                return `
                    <tr>
                        <td><span class="rank-badge ${rankClass}">${rank}</span></td>
                        <td><strong>${player.player_name}</strong></td>
                        <td>${player.challenge_title}</td>
                        <td>${player.scores.clarity}</td>
                        <td>${player.scores.instruction_following}</td>
                        <td>${player.scores.hallucination}</td>
                        <td><span class="score-badge">${Math.round(player.total_score)}</span></td>
                    </tr>
                `;
            }).join('');

            // Render cards for mobile
            cardsContainer.innerHTML = players.map((player, index) => {
                const rank = index + 1;
                let cardClass = '';
                if (rank === 1) cardClass = 'rank-1-card';
                else if (rank === 2) cardClass = 'rank-2-card';
                else if (rank === 3) cardClass = 'rank-3-card';

                let rankBadgeClass = 'rank-default';
                if (rank === 1) rankBadgeClass = 'rank-1';
                else if (rank === 2) rankBadgeClass = 'rank-2';
                else if (rank === 3) rankBadgeClass = 'rank-3';

                return `
                    <div class="leaderboard-card ${cardClass}">
                        <div class="leaderboard-card-header">
                            <div class="leaderboard-card-name">
                                <span class="rank-badge ${rankBadgeClass}">${rank}</span>
                                ${player.player_name}
                            </div>
                            <span class="score-badge">${Math.round(player.total_score)}</span>
                        </div>
                        <div class="leaderboard-card-challenge">${player.challenge_title}</div>
                        <div class="leaderboard-card-scores">
                            <div class="leaderboard-card-score">C: <span>${player.scores.clarity}</span></div>
                            <div class="leaderboard-card-score">I: <span>${player.scores.instruction_following}</span></div>
                            <div class="leaderboard-card-score">H: <span>${player.scores.hallucination}</span></div>
                        </div>
                    </div>
                `;
            }).join('');
        }
    </script>
</body>
</html>
